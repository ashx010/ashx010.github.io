<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="http://sl27.in/posoco/css/flush_message.css?v=1.0.0.1">
  <link rel="stylesheet" href="http://sl27.in/posoco/css/bootstrap-multiselect.css?v=1.0.0.1">
  <link rel="stylesheet" href="http://sl27.in/posoco/css/bootstrap.min.css?v=1.0.0.1">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="http://sl27.in/posoco/js/jquery.min.js?v=1.0.0.1"></script>
  <script src="http://sl27.in/posoco/js/bootstrap.min.js?v=1.0.0.1"></script>
  <script src="http://sl27.in/posoco/js/bootstrap-multiselect.js?v=1.0.0.1"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.0/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/2.3.5/jspdf.plugin.autotable.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>




  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kia India </title>
  <link rel="icon" type="image/x-icon" href="./image/kia-fevicon.webp">

  <style>
    .popup-table {
      border-collapse: collapse;
      width: 100%;
    }

    .popup-table td {
      border: 1px solid #ddd;
      padding: 8px;
    }

    .popup-table tr:nth-child(even) {
      background-color: #f2f2f2;
    }

    .popup-table tr:hover {
      background-color: #ddd;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th,
    td {
      border: 1px solid black;
      padding: 8px;
    }

    .toptable {
      margin-bottom: 20px;
    }

    .nodetablerow {
      margin-bottom: 20px;
    }

    .nodes-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }




    .geographydetailsrow {
      position: absolute;
      top: 109px;
      /* left: 170px; */
      right: 10px;
      z-index: 999;
    }


    #map {
      height: 90vh;
    }

    form#myForm {
      padding: 20px;
    }

    .form-group select {
      width: 100%;
      outline: none;
      border: none;
      background: #8dcebfb0;
      color: #333;
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 1px;
      border-bottom: 2px solid #0e3657;
      padding-bottom: 11px;
    }

    /* .leaflet-marker-pane {
      display: none !important;
    }

    .leaflet-marker-pane.active {
      display: block !important;
    } */

    .leaflet-pane.leaflet-overlay-pane .leaflet-interactive {
      fill: #e8b34d;
      /* stroke: #33822c; */
    }
  </style>

</head>

<body>
  <div class="col-1">
    <header class="container-fluid headrow">
      <div class="col-md-3 col-xs-12">
        <div class="row">
          <!-- <div class="logosec">
            <img class="imglogo" alt="Power System Operation Corporation Limited" src="./image/kia-logo.webp">
          </div> -->
        </div>
      </div>

      <div class="col-md-6 col-xs-12 head-midcol">
        <div class="row">
          <div class="headingsec">
            <!-- <h4>Power System Operation Corporation Limited (POSOCO)<br>(A Government of India Enterprise) CIN:
                    U40105DL2009GOI188682</h4> -->
            <!-- <h1>Kia India</h1> -->
            <div class="logosec">
              <img class="imglogo" alt="Kia India" src="./image/kia-logo.webp">
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-3 col-xs-12">
        <div class="row">
          <div class="usersec">
            <!-- <h4>Hello Nurul!</h4> -->
            <ul class="usernav navbar-nav">
              <li class="userdropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Demo User!<span
                    class="glyphicon glyphicon-user pull-right"></span></a>
                <ul class="dropdown-menu">
                  <!-- <li><a href="#">Account Settings <span class="glyphicon glyphicon-cog pull-right"></span></a></li>
                <li class="divider"></li>
                <li><a href="#">User stats <span class="glyphicon glyphicon-stats pull-right"></span></a></li>
                <li class="divider"></li>
                <li><a href="#">Messages <span class="badge pull-right"> 42 </span></a></li>
                <li class="divider"></li>
                <li><a href="#">Favourites Snippets <span class="glyphicon glyphicon-heart pull-right"></span></a></li>
                <li class="divider"></li> -->
                  <li><a href="/posoco1/admins/logout">Sign Out <span
                        class="glyphicon glyphicon-log-out pull-right"></span></a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>
    <div class="modal fade" id="nodeModal" tabindex="-1" role="dialog" aria-labelledby="nodeModalLabel"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-body" id="editFrom"></div>
        </div>
      </div>
    </div>
    <div class="container-fluid loadDespatchRow">
      <div class="row">
        <!-- New Section to add map online -->
        <div class="map-container">
          <div id="map"></div>
        </div>
        <!-- New Section to add map online end -->
        <div class="node col-md-3 col-xs-12 selectbtns">
          <!-- Left Collaps button -->
          <!-- <div  class="leftcollapsebtn" data-toggle="collapse" data-target="#leftcoltab">
          <img src="http://sl27.in/posoco/img/left-collapse-button.png">
        </div> -->
          <div class="menu btn1" data-toggle="collapse" data-target="#leftcoltab">
            <div class="icon-left"></div>
            <div class="icon-right"></div>
          </div>
          <!-- Left collapse btn end -->
          <div id="leftcoltab" class="formselect collapse">
            <form name="myform" id="myForm">
              <div class="form-group">
                <select id="CouuntrySel" size="1">
                  <option value="" selected="selected"> Select Country</option>
                  <option value="India">India</option>
                </select>
              </div>
              <br>
              <div class="form-group">
                <select id="stateSel" size="1">
                  <option value="" selected="selected">Select State</option>
                </select>
              </div>
              <br>
              <div class="form-group">
                <select id="DistrictSel" size="1">
                  <option value="" selected="selected">Select District</option>
                </select>
              </div>
              <br>
              <div class="form-group">
                <select id="Sub-districtSel" size="1">
                  <option value="" selected="selected">Select Sub-District</option>
                </select>
              </div>
              <br>
              <div class="form-group">
                <select id="TownSel" size="1">
                  <option value="" selected="selected">Select Town</option>
                </select>
              </div>
              <br>
              <div class="form-group">
                <select id="Pin-codeSel" size="1">
                  <option value="" selected="selected">Select Pin-Code</option>
                </select>
              </div>
              <br>
              <div class="form-group">
                <select id="CompanySel" size="1">
                  <option value="" selected="selected"> Select Company Name</option>
                </select>
              </div>
              <br>
              <div class="form-group">
                <select id="TownSel" size="1">
                  <option value="" selected="selected"> Select Dealer Name</option>
                </select>
              </div>
              <br>
              <div class="form-group">
                <input type="checkbox" id="showRoom" name="fav_language" value=" Show Room">
                <label for="html">Show Room</label><br>
                <input type="checkbox" id="ragisterOffice" name="fav_language" value="Ragister Office">
                <label for="css">Registered Office</label><br>
                </select>
              </div>
            </form>
            <!-- Switch Section End -->
            <div id="submitBtn">
              <button type="submit" onClick="location.reload(true)" class="btn btn-default">Reset</button>
              <button type="button" onClick="submitForm()" class="btn btn-default">Submit</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6 col-md-offset-3 col-xs-12 geographydetailsrow">
      <!-- Right Collaps button -->
      <!-- <div class="rightcollapsebtn" data-toggle="collapse" data-target="#rightcoltab">
      <img src="http://sl27.in/posoco/img/right-collapse-button.png">
    </div> -->
      <div class="menu btn2" data-toggle="collapse" data-target="#rightcoltab">
        <div class="icon-left"></div>
        <div class="icon-right"></div>
      </div>
      <!-- Right collapse btn end -->
      <div id="rightcoltab" class="detailsrightSec collapse">
        <!-- Top Table -->
        <!-- Geography Title Section -->
        <div class="geographyhed-row">
          <h2 class="geography-title">Geography Details</h2>
          <!-- Export PDF Button -->
          <button onclick="generatePDF()">Generate PDF</button>
        </div>
        <!-- Geography Title Section End -->
        <div id="pdfContent">
          <div class="table-responsive toptable">
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Country</th>
                  <th>State</th>
                  <th>District</th>
                  <th>Sub-District</th>
                  <th>Town</th>
                  <th>Pin-Code</th>
                  <th>Sub-District</th>
                  <th>Company Name</th>
                  <th>Dealer Name</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td id="country_name"></td>
                  <td id="state_name"></td>
                  <td id="district_name"></td>
                  <td id="sub_District"></td>
                  <td id="cmpany_name"></td>
                  <td id="dealer_name"></td>
                </tr>
              </tbody>
            </table>
          </div>


          <script src="https://unpkg.com/esri-leaflet@2.3.2/dist/esri-leaflet.js"
            integrity="sha512-6LVib9wGnqVKIClCduEwsCub7iauLXpwrd5njR2J507m3A2a4HXJDLMiSZzjcksag3UluIfuW1KzuWVI5n/cuQ=="
            crossorigin=""></script>

          <script type="text/javascript">
            var mymap = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
              osmAttrib = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',
              osm = L.tileLayer(mymap, {
                maxZoom: 13,
                attribution: osmAttrib
              }),
              map = new L.Map('map', {
                center: new L.LatLng(20.5937, 78.9629),
                zoom: 5
              });
            map.options.minZoom = 6;
            map.options.maxZoom = 13;
            drawnItems = L.esri.basemapLayer('Streets').addTo(map);
            L.control.layers({
              'osm': osm.addTo(map)
            }, {
              'drawlayer': drawnItems
            }, {
              position: 'topleft',
              collapsed: false
            }).addTo(map);
            L.control.zoom({
              position: 'bottomright'
            }).addTo(map);
            var popup = L.popup();
            var LeafIcon = L.Icon.extend({
              options: {
                iconSize: [36, 49],
                shadowSize: [50, 64],
                iconAnchor: [22, 94],
                shadowAnchor: [4, 62],
                popupAnchor: [-3, -76]
              }
            });
            var stateData, districtData, subdistrictData;
var stateLayer, districtLayer, subdistrictLayer;

// Load Delhi state data
$.getJSON('Delhi_State_Boundary.geojson', function(data) {
  stateData = data;

  // Populate state dropdown options
  var stateSel = document.getElementById('stateSel');
  stateData.features.forEach(feature => {
    var stateName = feature.properties.STATE_NAME;
    var option = document.createElement('option');
    option.value = stateName;
    option.textContent = stateName;
    stateSel.appendChild(option);
  });
});

// Load district data
$.getJSON('Delhi_District_Boundary.geojson', function(data) {
  districtData = data;

  // Populate district dropdown options
  var districtSel = document.getElementById('DistrictSel');
  districtData.features.forEach(feature => {
    var districtName = feature.properties.DIST_NAME;
    var option = document.createElement('option');
    option.value = districtName;
    option.textContent = districtName;
    districtSel.appendChild(option);
  });
});

// Load sub-district data
$.getJSON('Delhi_Sub_District_Boundary.geojson', function(data) {
  subdistrictData = data;
});

// Rest of your code remains the same

// Add event listeners for reset and submit buttons
$('#resetBtn').on('click', function () {
      // Reset dropdowns
      $('#stateSel').val('');
      $('#DistrictSel').val('');

      // Clear map layers except the drawnItems layer
      map.eachLayer(function (layer) {
        if (layer !== drawnItems) {
          map.removeLayer(layer);
        }
      });
    });

    $('#submitBtn').on('click', function () {
      submitForm();
    });

    function submitForm() {
      var selectedState = $("#stateSel").val();
      var selectedDistrict = $("#DistrictSel").val();

      // Remove existing state and district layers from the map
      if (stateLayer) {
        map.removeLayer(stateLayer);
      }
      if (districtLayer) {
        map.removeLayer(districtLayer);
      }

      // Check if a state is selected
      if (selectedState !== '') {
        // Display state layer
        stateLayer = L.geoJSON(stateData, {
          filter: function(feature) {
            return feature.properties.STATE_NAME === selectedState;
          },
          style: {
            color: '#3388ff',
            fillOpacity: 0.2,
            weight: 2
          }
        }).addTo(map);

        map.fitBounds(stateLayer.getBounds());
      }

      // Check if a district is selected
      if (selectedDistrict !== '') {
        // Display district layer
        districtLayer = L.geoJSON(districtData, {
          filter: function(feature) {
            return (
              feature.properties.DIST_NAME === selectedDistrict
            );
          },
          style: {
            color: '#ff3333',
            weight: 2
          }
        }).addTo(map);

        map.fitBounds(districtLayer.getBounds());
      }
    }







    // var zoomMap = {
    //     maxZoom: 13,
    //     animate: true,
    //     duration: 1.5,
    //     easeLinearity: 0.2,
    //     zoomPanOptions: {
    //       animate: true,
    //       duration: 1 
    //     }
    //   }



  </script>
</body>
</html>
