var stateLayers = {}; // Store state boundary layers
var districtLayer = null;

var selectedStateLayer = null;
var delhiDistrictData; // Store Delhi district boundary data
var uttarPradeshDistrictData; // Store Uttar Pradesh district boundary data

// Load state boundary data
$.getJSON('Delhi_State_Boundary.geojson', function(data) {
stateLayers['Delhi'] = L.geoJSON(data, {
style: {
color: '#3388ff',
fillOpacity: 0.2,
weight: 2
}
});
});

// Load district boundary data for Delhi
$.getJSON('Delhi_District_Boundary.geojson', function(data) {
delhiDistrictData = data;

var districtSel = document.getElementById('districtSel');
delhiDistrictData.features.forEach(feature => {
var districtName = feature.properties.DIST_NAME;
var option = document.createElement('option');
option.value = districtName;
option.textContent = districtName;
districtSel.appendChild(option);
});
});

$.getJSON('Uttar_Pradesh_State_Boundary.geojson', function(data) {
stateLayers['Uttar Pradesh'] = L.geoJSON(data, {
style: {
color: '#3388ff',
fillOpacity: 0.2,
weight: 2
}
});
});

// Load district boundary data for Uttar Pradesh
$.getJSON('Uttar_Pradesh_District_Boundary.geojson', function(data) {
uttarPradeshDistrictData = data;

var districtSel = document.getElementById('districtSel');
uttarPradeshDistrictData.features.forEach(feature => {
var districtName = feature.properties.DIST_NAME;
var option = document.createElement('option');
option.value = districtName;
option.textContent = districtName;
districtSel.appendChild(option);
});
});

// Initialize the map
var map = L.map('map').setView([28.6139, 77.2090], 8);

// Add event listener for submit button
$('#submitBtn').on('click', function () {
submitForm();
});

function submitForm() {
var selectedState = $("#stateSel").val();
var selectedDistrict = $("#districtSel").val();

// Remove previous layers if exist
if (selectedStateLayer) {
map.removeLayer(selectedStateLayer);
}
if (districtLayer) {
map.removeLayer(districtLayer);
}

if (selectedState) {
// Display selected state layer
selectedStateLayer = stateLayers[selectedState].addTo(map);

// Show selected state name
$("#selectedState").text("Selected State: " + selectedState);

// Fit map to the state boundary
map.fitBounds(selectedStateLayer.getBounds());
}

if (selectedDistrict) {
// Determine which district data to use based on the selected state
var districtData = selectedState === 'Delhi' ? delhiDistrictData : uttarPradeshDistrictData;

districtData.features.forEach(function(feature) {
if (feature.properties.DIST_NAME === selectedDistrict) {
districtLayer = L.geoJSON(feature, {
style: {
color: '#f00',
fillOpacity: 0.2,
weight: 2
}
}).addTo(map);

// Show selected district name
$("#selectedDistrict").text("Selected District: " + selectedDistrict);

// Fit map to the district boundary
map.fitBounds(districtLayer.getBounds());
}
});
}
}




// var zoomMap = {
//     maxZoom: 13,
//     animate: true,
//     duration: 1.5,
//     easeLinearity: 0.2,
//     zoomPanOptions: {
//       animate: true,
//       duration: 1
//     }
//   }



</script>
</body>

</html>